import{u as N,r as n,d as m,j as e}from"./index-gGvbseje.js";import{u as y,a as h,i as v,g as w,b as E}from"./useCardExpansion-CAsww_Od.js";const k=()=>{const{t:l}=N(),[u,p]=n.useState([]),[d,g]=n.useState(""),[c,o]=n.useState({}),{toggleCardExpansion:b,isExpanded:j}=y();n.useEffect(()=>{const s=m.subscribeToThoughts(a=>{p(a);const t={};a.forEach(r=>{const i=h(r.createdAt);t[i]=!0}),o(r=>({...r,...t}))});return()=>{s()}},[]);const x=u.filter(s=>s.content.toLowerCase().includes(d.toLowerCase())).reduce((s,a)=>{const t=h(a.createdAt);return s[t]||(s[t]=[]),s[t].push(a),s},{});return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 py-6 sm:py-12",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"bg-primary text-white rounded-xl sm:rounded-2xl p-4 sm:p-8 mb-6 sm:mb-8 shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white/25 rounded-lg mr-3 sm:mr-4 flex items-center justify-center",children:e.jsx("span",{className:"text-xl sm:text-2xl",children:"💭"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-xl sm:text-3xl font-bold tracking-tight truncate",children:l("thoughts.title")}),e.jsx("p",{className:"opacity-90 text-sm sm:text-lg",children:l("thoughts.subtitle")})]})]}),e.jsx("div",{className:"bg-white/95 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-muted text-lg sm:text-xl",children:"🔍"}),e.jsx("input",{type:"text",value:d,onChange:s=>g(s.target.value),placeholder:l("thoughts.search"),className:"w-full text-base sm:text-lg border-0 bg-transparent focus:outline-none placeholder-gray-400 text-primary"})]})})]})}),Object.keys(x).length===0?e.jsxs("div",{className:"card text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-3",children:l("thoughts.empty")}),e.jsx("p",{className:"text-muted text-base",children:l("thoughts.empty_subtitle")})]}):e.jsx("div",{className:"space-y-8",children:Object.entries(x).sort(([s],[a])=>new Date(a).getTime()-new Date(s).getTime()).map(([s,a])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold mr-2 text-primary",children:s}),e.jsxs("span",{className:"badge",children:[a.length,l("thoughts.count")]}),e.jsx("button",{onClick:()=>o(t=>({...t,[s]:!t[s]})),className:"ml-4 btn-outline p-2 rounded-lg","aria-label":c[s]?l("thoughts.collapse"):l("thoughts.expand"),children:c[s]?"🔼":"🔽"})]}),c[s]&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(t=>{const r=v(t.content),i=j(t.id),f=r&&!i?w(t.content):t.content;return e.jsx("div",{className:"card card-hover relative group",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"pr-8 flex-1",children:[e.jsx("p",{className:"text-base leading-relaxed font-medium text-primary whitespace-pre-line",children:f}),r&&e.jsx("button",{onClick:()=>b(t.id),className:"mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:i?"접기":"...더보기"})]}),e.jsx("button",{onClick:async()=>{window.confirm(l("thoughts.delete_confirm"))&&await m.deleteThought(t.id)},className:"absolute top-4 right-4 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity duration-200 text-muted hover:text-red-600 p-1","aria-label":"Delete thought",children:"🗑️"})]}),e.jsx("div",{className:"badge ml-auto",children:E(t.createdAt)})]})},t.id)})})]},s))})]})};export{k as ThoughtsPage};
