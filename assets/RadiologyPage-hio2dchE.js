import{u as N,r as d,d as x,j as s}from"./index-gGvbseje.js";import{u as v,i as w,g as E,b as C}from"./useCardExpansion-CAsww_Od.js";const S=()=>{const{t}=N(),[a,p]=d.useState([]),[l,o]=d.useState("all"),{toggleCardExpansion:h,isExpanded:g}=v();d.useEffect(()=>{const e=x.subscribeToRadiologyNotes(p);return()=>e()},[]);const u=d.useMemo(()=>{const e=new Set;return a.forEach(r=>{const i=r.tags.findIndex(n=>n==="#rad");i!==-1&&r.tags.slice(i+1).forEach(n=>e.add(n))}),Array.from(e).sort()},[a]),m=d.useMemo(()=>l==="all"?a:a.filter(e=>e.tags.includes(l)),[a,l]),b=e=>a.filter(r=>r.tags.includes(e)).length,y=e=>{window.confirm(t("radiology.delete_confirm"))&&x.deleteRadiologyNote(e)},f=e=>e.startsWith("#")?e.slice(1):e;return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 py-6 sm:py-12",children:[s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsxs("div",{className:"bg-primary text-white rounded-xl sm:rounded-2xl p-4 sm:p-8 mb-6 sm:mb-8 shadow-lg",children:[s.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white/25 rounded-lg mr-3 sm:mr-4 flex items-center justify-center",children:s.jsx("span",{className:"text-xl sm:text-2xl",children:"🔬"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h2",{className:"text-xl sm:text-3xl font-bold tracking-tight truncate",children:t("radiology.title")}),s.jsx("p",{className:"opacity-90 text-sm sm:text-lg",children:t("radiology.subtitle")})]})]}),s.jsx("div",{className:"bg-white/95 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-md",children:s.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[s.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-2 sm:px-4 sm:py-2 rounded-lg font-semibold transition-all duration-200 text-sm sm:text-base ${l==="all"?"bg-primary text-white shadow-md":"text-primary hover:text-primary/80 bg-transparent hover:bg-primary/10"}`,children:[t("radiology.all")," (",a.length,")"]}),u.map(e=>s.jsxs("button",{onClick:()=>o(e),className:`px-3 py-2 sm:px-4 sm:py-2 rounded-lg font-semibold transition-all duration-200 text-sm sm:text-base ${l===e?"bg-primary text-white shadow-md":"text-primary hover:text-primary/80 bg-transparent hover:bg-primary/10"}`,children:[f(e)," (",b(e),")"]},e))]})})]})}),m.length===0?s.jsxs("div",{className:"card text-center",children:[s.jsx("h3",{className:"text-xl font-bold text-primary mb-3",children:t(l==="all"?"radiology.empty_all":"radiology.empty_tag")}),s.jsx("p",{className:"text-muted text-base",children:t("radiology.empty_subtitle")})]}):s.jsx("div",{className:"space-y-6",children:m.map(e=>{const r=w(e.content),i=g(e.id),n=r&&!i?E(e.content):e.content;return s.jsx("div",{className:"card card-hover relative group",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1 pr-8",children:[s.jsx("p",{className:"text-base leading-relaxed font-medium text-primary whitespace-pre-line",children:n}),r&&s.jsx("button",{onClick:()=>h(e.id),className:"mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:i?"접기":"...더보기"})]}),s.jsx("button",{onClick:()=>y(e.id),className:"absolute top-4 right-4 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity duration-200 text-muted hover:text-red-600 p-1","aria-label":"Delete note",children:"🗑️"})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.tags.map((c,j)=>s.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-semibold ${c==="#rad"?"bg-green-100 text-green-800":"badge"}`,children:c},j))}),s.jsx("div",{className:"badge ml-auto",children:C(e.createdAt)})]})},e.id)})})]})};export{S as RadiologyPage};
